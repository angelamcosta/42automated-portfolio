<% var user; %>
<% var projects; %>

<!doctype html>
<html lang="en">

<head>
	<%- include ('components/head.ejs') %>
</head>

<body>
	<%- include ('components/header.ejs') %>

	<div class="container flex mb-5">
		<div class="row g-5">
			<div class="col-md-5 col-lg-4">
				<div class="container mt-4 mb-4 p-3 d-flex justify-content-center">
					<div class="card p-4">
						<div class=" image d-flex flex-column justify-content-center align-items-center">
							<button class="btn">
								<img src=<%=user.image.link %> height="100" />
							</button>
							<span class="name m-3 text-center">
								<%= user.displayname %>
							</span>
							<span class="idd">@<%= user.login %></span>
							<span class="idd1">Student at 42 <%= user.campus[0].name %></span>
							<div class="d-flex flex-row justify-content-center align-items-center gap-2">
								<span class="idd1">
									<%= user.email %>
								</span>
								<span>
									<i class="fa fa-copy"></i>
								</span>
							</div>
							<span class="name mt-3">User level: <%= user.cursus_users[1].level %></span>
							<div class="text mt-3">
								<p>Skills</p>
								<% for (let i = 0; i < user.cursus_users[1].skills.length; i++) { %>
									<li>
										<span>
											<%= user.cursus_users[1].skills[i].name %>: <%= user.cursus_users[1].skills[i].level %>
										</span>
									</li>
								<% } %>
							</div>
							<div class=" px-2 rounded mt-4 date ">
								<span class="join">Joined at <%= new Date(user.cursus_users[1].begin_at).toLocaleString('en-US', {	month: 'long' , day: 'numeric' }) %></span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-7 col-lg-8">
				<div class="container-fluid">
					<div class="row g-3">
						<h4 class="display-6 mb-3 pt-3">Completed projects</h4>
		
						<% for (let i = 0; i < projects.length; i++) { %>
							<div class="col-5 m-3 p-3 bg-primary rounded">
								<h2 class="text-body-emphasis">
									<%= projects[i].name %>
								</h2>
								<p class="blog-post-meta">Estimated time: <%= projects[i].project_sessions[0].estimate_time %>
								</p>
								<p>
									<%= projects[i].project_sessions[0].description %>
								</p>
								<ul>
									<% for (let j = 0; j < projects[i].project_sessions[0].objectives.length; j++) { %>
										<li><%= projects[i].project_sessions[0].objectives[j] %></li>
									<% } %>
								</ul>
							</div>
						<% } %>
					</div>
					<div class="row g-3">
						<h4 class="display-6 mb-3 pt-3">User achievements</h4>
	
						<% for (let i = 0; i < user.achievements.length; i++) { %>
							<div class="col-2">
								<img class="bd-placeholder-img mb-3" src="https://api.intra.42.fr<%= user.achievements[i].image %>" width="100" alt="achievement <%= user.achievements[i].id %>" data-bs-toggle="tooltip" data-bs-title="<%= user.achievements[i].description %>" >
								<h5 class="fw-normal"><%= user.achievements[i].name %></h2>
							</div>
						<% } %>
					</div>
				</div>
			</div>
		</div>
	</div>	

	<%- include ('components/footer.ejs') %>
</body>

</html>